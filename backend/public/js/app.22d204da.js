(function(){"use strict";var e={7370:function(e,t,o){var r=o(9242),s=o(3396);const a={class:"page"},n={class:"content"};function i(e,t,o,r,i,l){const c=(0,s.up)("Header"),u=(0,s.up)("LeftDiv"),m=(0,s.up)("Errors"),d=(0,s.up)("router-view"),p=(0,s.up)("RightDiv"),g=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c),(0,s._)("div",a,[(0,s.Wm)(u),(0,s._)("div",n,[(0,s.Wm)(m,{error:i.error},null,8,["error"]),(0,s.Wm)(d,{onError:l.handleError},null,8,["onError"])]),(0,s.Wm)(p)]),(0,s.Wm)(g)])}const l=e=>((0,s.dD)("data-v-31e94012"),e=e(),(0,s.Cn)(),e),c=l((()=>(0,s._)("div",{class:"container navbar"},[(0,s._)("h1",null,"Bar Advisor")],-1))),u=[c];function m(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("nav",null,u)}var d={name:"Header"},p=o(89);const g=(0,p.Z)(d,[["render",m],["__scopeId","data-v-31e94012"]]);var v=g;const h={class:"text-center text-lg-start",style:{"background-color":"var(--secondaryOrange)","border-top":"1px solid black"}},w=(0,s._)("div",{class:"container text-center pt-2"},[(0,s._)("section",{class:"mb-4"},[(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"#!",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-facebook"})]),(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"#!",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-twitter"})]),(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"#!",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-google"})]),(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"#!",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-instagram"})]),(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"#!",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-linkedin"})]),(0,s._)("a",{class:"btn btn-link btn-floating btn-lg text-dark m-1",href:"https://www.github.com/giovannifoletto/BarAdvisor",role:"button","data-mdb-ripple-color":"dark"},[(0,s._)("i",{class:"bi bi-github"})])])],-1),f=(0,s._)("div",{class:"text-center p-3",style:{"background-color":"var(--secondaryOrange)"}}," Â© 2022 Copyright: BarAdvisor Inc. ",-1),_=[w,f];function y(e,t){return(0,s.wg)(),(0,s.iD)("footer",h,_)}const b={},k=(0,p.Z)(b,[["render",y]]);var z=k;const D=e=>((0,s.dD)("data-v-9aa7e056"),e=e(),(0,s.Cn)(),e),C={class:"navbarlist"},P={class:"flex"},E={class:"icon"},I=D((()=>(0,s._)("div",null,[(0,s._)("h3",null,"Home")],-1))),$={class:"flex"},L={class:"icon"},x=D((()=>(0,s._)("div",null,[(0,s._)("h3",null,"Login")],-1))),S={class:"flex"},W={class:"icon"},U=D((()=>(0,s._)("div",null,[(0,s._)("h3",null,"Logout")],-1))),M={class:"flex"},j={class:"icon"},q=D((()=>(0,s._)("div",null,[(0,s._)("h3",null,"Vai al mio Locale")],-1))),N={class:"flex"},R={class:"icon"},V=D((()=>(0,s._)("div",null,[(0,s._)("h3",null,"Vai al mio profilo")],-1)));function A(e,t,o,r,a,n){const i=(0,s.up)("Home"),l=(0,s.up)("router-link"),c=(0,s.up)("Login");return(0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(l,{to:{name:"home"}},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s._)("div",E,[(0,s.Wm)(i)]),I])])),_:1})]),(0,s._)("li",null,[e.$store.state.token?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(l,{key:0,to:{name:"login"}},{default:(0,s.w5)((()=>[(0,s._)("div",$,[(0,s._)("div",L,[(0,s.Wm)(c)]),x])])),_:1}))]),(0,s._)("li",null,[e.$store.state.token?((0,s.wg)(),(0,s.j4)(l,{key:0,onClick:n.logout,to:{name:"home"}},{default:(0,s.w5)((()=>[(0,s._)("div",S,[(0,s._)("div",W,[(0,s.Wm)(c)]),U])])),_:1},8,["onClick"])):(0,s.kq)("",!0)]),(0,s._)("li",null,[e.$store.state.user?.locale?((0,s.wg)(),(0,s.j4)(l,{key:0,to:{name:"paginaLocale",params:{localeID:e.$store.state.user?.locale}}},{default:(0,s.w5)((()=>[(0,s._)("div",M,[(0,s._)("div",j,[(0,s.Wm)(c)]),q])])),_:1},8,["to"])):(0,s.kq)("",!0)]),(0,s._)("li",null,["Cliente"===e.$store.state.user?.ruolo?((0,s.wg)(),(0,s.j4)(l,{key:0,to:{name:"profiloPersonale"}},{default:(0,s.w5)((()=>[(0,s._)("div",N,[(0,s._)("div",R,[(0,s.Wm)(c)]),V])])),_:1})):(0,s.kq)("",!0)])])])}const O={xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",fill:"currentColor",class:"bi bi-house-door",viewBox:"0 0 16 16"},T=(0,s._)("path",{d:"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"},null,-1),Z=[T];function B(e,t){return(0,s.wg)(),(0,s.iD)("svg",O,Z)}const H={},J=(0,p.Z)(H,[["render",B]]);var G=J;const Y={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},F=(0,s._)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"},null,-1),K=(0,s._)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"},null,-1),Q=[F,K];function X(e,t){return(0,s.wg)(),(0,s.iD)("svg",Y,Q)}const ee={},te=(0,p.Z)(ee,[["render",X]]);var oe=te,re={name:"Left Div",components:{Home:G,Login:oe},data(){return{immagine:null}},methods:{logout(){this.$store.commit("resetToken")}}};const se=(0,p.Z)(re,[["render",A],["__scopeId","data-v-9aa7e056"]]);var ae=se,ne=o(7139);const ie={key:0},le={key:1};function ce(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("div",null,[e.$store.state.token?((0,s.wg)(),(0,s.iD)("h1",ie,"Ciao, "+(0,ne.zw)(e.$store.state.user.nome),1)):(0,s.kq)("",!0),e.$store.state.token?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h1",le," Esegui il Login per utilizzare al meglio la piattaforma. "))])}var ue={name:"Right Div"};const me=(0,p.Z)(ue,[["render",ce],["__scopeId","data-v-cc21dbb8"]]);var de=me;const pe={key:0,class:"alert alert-danger dad mt-3",role:"alert"},ge={class:"text"},ve={class:"cancel"};function he(e,t,o,r,a,n){const i=(0,s.up)("Cross");return o.error.status?((0,s.wg)(),(0,s.iD)("div",pe,[(0,s._)("div",ge,(0,ne.zw)(o.error.messaggio),1),(0,s._)("div",ve,[(0,s._)("button",{onClick:t[0]||(t[0]=e=>o.error.status=!o.error.status)},[(0,s.Wm)(i)])])])):(0,s.kq)("",!0)}const we={xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-circle",viewBox:"0 0 16 16"},fe=(0,s._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),_e=(0,s._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"},null,-1),ye=[fe,_e];function be(e,t){return(0,s.wg)(),(0,s.iD)("svg",we,ye)}const ke={},ze=(0,p.Z)(ke,[["render",be]]);var De=ze,Ce={name:"Errors",components:{Cross:De},props:["error"]};const Pe=(0,p.Z)(Ce,[["render",he],["__scopeId","data-v-672a743a"]]);var Ee=Pe,Ie={name:"AppVue",components:{Header:v,Footer:z,LeftDiv:ae,RightDiv:de,Errors:Ee},data(){return this.$store.commit("recoverState"),{error:{status:!1,messaggio:"Errore di default."}}},methods:{async handleError(e){this.error=e}}};const $e=(0,p.Z)(Ie,[["render",i]]);var Le=$e,xe=o(678),Se=o(65);const We=(0,Se.MT)({state(){return{token:null,user:{}}},mutations:{setLogin(e,t){e.token=t.token,e.user=t.user,t.restaLoggato?(sessionStorage.setItem("token",t.token),sessionStorage.setItem("user",JSON.stringify(t.user))):(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)))},resetToken(e){e.token=null,e.user=null;try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(t){console.log("No data in the localStorage")}try{sessionStorage.removeItem("token"),sessionStorage.removeItem("user")}catch(t){console.log("No data in the sessionStorage")}},recoverState(e){null!=localStorage.getItem("token")&&(e.token=localStorage.getItem("token"),e.user=JSON.parse(localStorage.getItem("user"))),null!=sessionStorage.getItem("token")&&(e.token=sessionStorage.getItem("token"),e.user=JSON.parse(sessionStorage.getItem("user")))}}});var Ue=We;function Me(e,t,o){Ue.state.token?o():o({name:"login"})}function je(e,t,o){"GestoreLocale"!==Ue.state.user.ruolo||Ue.state.user.locale!==t.params.localeID?o({name:"error403"}):o()}function qe(e,t,o,r,a,n){const i=(0,s.up)("Errors"),l=(0,s.up)("PostEvento");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i,{error:a.error},null,8,["error"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.eventi,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e._id,evento:e,locale:e.locale},null,8,["evento","locale"])))),128))])}const Ne=e=>((0,s.dD)("data-v-56d80570"),e=e(),(0,s.Cn)(),e),Re={class:"post my-1"},Ve={class:"title pt-2"},Ae={class:"account"},Oe={class:"under"},Te={key:0,class:"img-section"},Ze=["src"],Be={class:"info p-1"},He={class:"important-info"},Je={class:"locale"},Ge=Ne((()=>(0,s._)("h6",null,"Locale",-1))),Ye={class:"data-inizio"},Fe=Ne((()=>(0,s._)("h6",null,"Data di inizio",-1))),Ke=Ne((()=>(0,s._)("h6",null,"informazioni",-1)));function Qe(e,t,o,r,a,n){const i=(0,s.up)("Account"),l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Re,[(0,s._)("div",Ve,[(0,s._)("div",Ae,[(0,s._)("div",null,[(0,s.Wm)(i)]),(0,s.Wm)(l,{to:{name:"paginaEvento",params:{eventoID:o.evento._id}},class:"px-3"},{default:(0,s.w5)((()=>[(0,s._)("h3",null,(0,ne.zw)(o.evento.nome[0].toUpperCase()+o.evento.nome.slice(1,1e3)),1)])),_:1},8,["to"])])]),(0,s._)("div",Oe,[a.copertinaCaricata?((0,s.wg)(),(0,s.iD)("div",Te,[(0,s._)("img",{src:a.copertina,class:"img"},null,8,Ze)])):(0,s.kq)("",!0),(0,s._)("div",Be,[(0,s._)("div",He,[(0,s._)("div",Je,[Ge,(0,s.Wm)(l,{to:{name:"paginaLocale",params:{localeID:o.locale._id}}},{default:(0,s.w5)((()=>[(0,s._)("h4",null,(0,ne.zw)(o.locale.nome[0].toUpperCase()+o.locale.nome.slice(1,1e3)),1)])),_:1},8,["to"])]),(0,s._)("div",Ye,[Fe,(0,s._)("h4",null,(0,ne.zw)(new Date(o.evento.dataInizio).getDate())+" "+(0,ne.zw)(a.months[new Date(o.evento.dataInizio).getMonth()])+" "+(0,ne.zw)(new Date(o.evento.dataInizio).getFullYear()),1),(0,s._)("h4",null," ore: "+(0,ne.zw)(new Date(o.evento.dataInizio).toLocaleTimeString().split(":")[0]+":"+new Date(o.evento.dataInizio).toLocaleTimeString().split(":")[1]),1)])]),Ke,(0,s._)("h5",null,(0,ne.zw)(o.evento.descrizione),1)])])])}o(8675),o(3462),o(2801);const Xe={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",class:"bi bi-person-circle",viewBox:"0 0 16 16",style:{fill:"var(--primary)"}},et=(0,s._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"},null,-1),tt=(0,s._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"},null,-1),ot=[et,tt];function rt(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("svg",Xe,ot)}var st={props:["width","height","fillVal"]};const at=(0,p.Z)(st,[["render",rt]]);var nt=at,it=o(6265),lt=o.n(it),ct={baseURL:"/api/v1"},ut={props:["evento","locale"],components:{Account:nt},data(){return{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],copertina:null,copertinaCaricata:!1}},async mounted(){try{if(this.evento.copertina){const o=await lt().get(`${ct.baseURL}/eventi/${this.evento._id}/copertina`);if(o.data.success){var e=new Uint8Array(o.data.imm.file.data.data),t=e.reduce(((e,t)=>e+String.fromCharCode(t)),"");this.copertina=`data:${o.data.imm.file.contentType};base64,${btoa(t)}`,this.copertinaCaricata=!0}}}catch(o){console.log(o)}}};const mt=(0,p.Z)(ut,[["render",Qe],["__scopeId","data-v-56d80570"]]);var dt=mt,pt={name:"HomeView",components:{PostEvento:dt,Errors:Ee},data(){return{eventi:[],error:{}}},async mounted(){try{const e=await fetch(`${ct.baseURL}/eventi`),t=await e.json();t.success?(this.eventi=t.eventi,0==this.eventi.length&&(this.error.status=!0,this.error.text="Non sono presenti ancora eventi sul database.")):(this.error.status=!0,this.error.text=t.message||"Errore imprevisto")}catch(e){this.error.status=!0,this.error.text=e||"Errore imprevisto"}}};const gt=(0,p.Z)(pt,[["render",qe]]);var vt=gt;const ht=e=>((0,s.dD)("data-v-052b2836"),e=e(),(0,s.Cn)(),e),wt={key:0},ft=ht((()=>(0,s._)("button",{class:"submit"},"Carica",-1))),_t={key:1,class:"event"},yt=["src"],bt=["src"],kt={class:"title"},zt={class:"description text-center"},Dt={key:1,class:"py-2"},Ct={class:"comments"},Pt={class:"info-comments px-4 mt-3 mb-2"},Et=ht((()=>(0,s._)("h3",null,"Commenti",-1))),It={key:0,class:"form-recensione"},$t={class:"input-group mb-3"},Lt={class:"input-group-append"},xt={key:1,class:"comm-row"},St={key:2};function Wt(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Secondary"),u=(0,s.up)("router-link"),m=(0,s.up)("Primary"),d=(0,s.up)("Commento"),p=(0,s.up)("Message");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),e.$store.state.token&&e.$store.state.user?.locale===n.evento?.locale._id?((0,s.wg)(),(0,s.iD)("div",wt,[(0,s._)("form",{enctype:"multipart/form-data",onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>i.caricaImmagine&&i.caricaImmagine(...e)),["prevent"]))},[(0,s._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>i.fileSelezionato&&i.fileSelezionato(...e)),id:"1",class:"custom-file-input"},null,32),ft],32),(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>i.annullaCaricamento&&i.annullaCaricamento(...e))},"Annulla")])):(0,s.kq)("",!0),n.eventoCaricato?((0,s.wg)(),(0,s.iD)("div",_t,[n.copertinaCaricata&&!n.preview?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"image",src:n.copertina},null,8,yt)):(0,s.kq)("",!0),n.preview?((0,s.wg)(),(0,s.iD)("img",{key:1,class:"image",src:n.preview},null,8,bt)):(0,s.kq)("",!0),(0,s._)("div",kt,[(0,s._)("h3",null,(0,ne.zw)(n.evento.nome[0].toUpperCase()+n.evento.nome.slice(1,1e3)),1)]),(0,s._)("div",zt,[(0,s._)("h5",null,(0,ne.zw)(n.evento.descrizione),1),(0,s.Wm)(u,{to:{name:"paginaLocale",params:{localeID:n.evento?.locale?._id}}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"Visita il Locale gestore dell'evento"})])),_:1},8,["to"]),e.$store.state.user?.locale===n.evento?.locale?._id?((0,s.wg)(),(0,s.j4)(u,{key:0,to:{name:"formInviaNotifica",params:{localeID:n.evento?.locale?._id,eventoID:o.eventoID}}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"Invia una notifica a questo evento"})])),_:1},8,["to"])):(0,s.kq)("",!0),e.$store.state.token?((0,s.wg)(),(0,s.iD)("div",Dt,[n.utentePrenotato?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:0,title:"Prenota",onButtonClicked:i.postPrenotazione},null,8,["onButtonClicked"])),n.utentePrenotato?((0,s.wg)(),(0,s.j4)(c,{key:1,title:"Cancella prenotazione",onButtonClicked:i.deletePrenotazione},null,8,["onButtonClicked"])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)]),(0,s._)("div",Ct,[(0,s._)("div",Pt,[Et,e.$store.state.token?((0,s.wg)(),(0,s.iD)("div",It,[(0,s._)("div",$t,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>n.commento.commento=e)},null,512),[[r.nr,n.commento.commento]]),(0,s._)("div",Lt,[(0,s.Wm)(m,{title:"Commenta",onButtonClicked:i.postCommento},null,8,["onButtonClicked"])])])])):(0,s.kq)("",!0),0!=n.evento.commenti.length?((0,s.wg)(),(0,s.iD)("div",xt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.evento.commenti,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e._id,commento:e.commento,idUtente:e.utente},null,8,["commento","idUtente"])))),128))])):((0,s.wg)(),(0,s.iD)("div",St,[(0,s.Wm)(p,{isSuccess:!1,messaggio:{status:!0,messaggio:"Ancora nessun commento."}},null,8,["messaggio"])]))])])])):(0,s.kq)("",!0)])}function Ut(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("button",{type:"button",class:"primary-button",onClick:t[0]||(t[0]=t=>e.$emit("buttonClicked",t))},(0,ne.zw)(o.title),1)}var Mt={props:["title"],emit:["buttonClicked"]};const jt=(0,p.Z)(Mt,[["render",Ut],["__scopeId","data-v-2c03a3d2"]]);var qt=jt;function Nt(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("button",{class:"secondary-button",type:"button",onClick:t[0]||(t[0]=t=>e.$emit("buttonClicked",t))},(0,ne.zw)(o.title),1)}var Rt={props:["title"],emits:["buttonClicked"]};const Vt=(0,p.Z)(Rt,[["render",Nt],["__scopeId","data-v-77fd3b59"]]);var At=Vt;const Ot={class:"text"},Tt={key:0,class:"cancel"};function Zt(e,t,o,r,a,n){const i=(0,s.up)("Cross");return o.messaggio.status?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,ne.C_)([{"alert-secondary":!o.isSuccess,"alert-success":o.isSuccess},"alert dad mt-3 border"]),role:"alert"},[(0,s._)("div",Ot,(0,ne.zw)(o.messaggio.messaggio),1),o.isSuccess?((0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("button",{onClick:t[0]||(t[0]=e=>o.messaggio.status=!o.messaggio.status)},[(0,s.Wm)(i)])])):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)}var Bt={name:"Messaggio",components:{Cross:De},props:["messaggio","isSuccess"]};const Ht=(0,p.Z)(Bt,[["render",Zt],["__scopeId","data-v-5bdf1cc3"]]);var Jt=Ht;const Gt={class:"comment my-2"},Yt={class:"left"},Ft={class:"right py-2"},Kt={class:"upper"},Qt={class:"pb-0"},Xt=(0,s._)("hr",null,null,-1),eo={class:"commento"};function to(e,t,o,r,a,n){const i=(0,s.up)("Account");return(0,s.wg)(),(0,s.iD)("div",Gt,[(0,s._)("div",Yt,[(0,s.Wm)(i,{height:"{val}",width:"{val}"})]),(0,s._)("div",Ft,[(0,s._)("div",Kt,[(0,s._)("h5",Qt,(0,ne.zw)(a.nomeUtente),1)]),Xt,(0,s._)("div",eo,[(0,s._)("h6",null,(0,ne.zw)(o.commento),1)])])])}const oo={class:"beer"};function ro(e,t,o,r,a,n){const i=(0,s.up)("Beer");return(0,s.wg)(),(0,s.iD)("div",oo,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.rankingBeerList,(e=>((0,s.wg)(),(0,s.j4)(i,{key:e.index,active:e.active},null,8,["active"])))),128))])}const so=(0,s._)("path",{x:"0",y:"0",width:"100%",height:"100%",d:"M396.86,189.696h-51.816v-8.471c16.876-12.499,27.84-32.548,27.84-55.113c0-33.43-24.055-61.349-55.764-67.356\n\tC307.903,24.725,276.851,0.001,240.165,0c-20.304,0.001-39.79,7.852-54.44,21.513c-5.231-1.368-10.64-2.072-16.077-2.072\n\tc-25.849,0-48.398,15.683-58.222,38.235c-1.34-0.079-2.687-0.118-4.037-0.118c-37.8,0-68.553,30.753-68.553,68.553\n\tc0,20.813,9.335,39.475,24.024,52.058v283.526c0,16.5,13.5,30,30,30h222.184c16.5,0,30-13.5,30-30v-44h51.816\n\tc30.878,0,56-25.122,56-56v-116C452.86,214.817,427.738,189.696,396.86,189.696z M304.331,156.665l-175.536,0v61.051\n\tc0,10.493-8.507,19-19,19c-10.493,0-19-8.507-19-19v-65.971c-8.393-5.452-13.959-14.902-13.959-25.634\n\tc0-16.847,13.706-30.553,30.553-30.553c3.792,0,7.503,0.694,11.032,2.062c5.636,2.185,11.976,1.559,17.075-1.689\n\tc5.099-3.248,8.348-8.728,8.751-14.759c0.889-13.307,12.046-23.731,25.401-23.731c4.356,0,8.485,1.06,12.27,3.149\n\tc8.375,4.622,18.88,2.297,24.523-5.427C214.409,44.256,226.701,38,240.165,38c22.277,0,40.586,17.408,41.682,39.631\n\tc0.251,5.1,2.545,9.885,6.365,13.274c3.819,3.39,8.842,5.104,13.936,4.744c0.884-0.062,1.578-0.09,2.183-0.09\n\tc16.847,0,30.553,13.706,30.553,30.553S321.178,156.665,304.331,156.665z M400.86,361.696c0,2.131-1.869,4-4,4h-51.816v-124h51.816\n\tc2.131,0,4,1.869,4,4V361.696z"},null,-1),ao=(0,s._)("g",null,null,-1),no=(0,s._)("g",null,null,-1),io=(0,s._)("g",null,null,-1),lo=(0,s._)("g",null,null,-1),co=(0,s._)("g",null,null,-1),uo=(0,s._)("g",null,null,-1),mo=(0,s._)("g",null,null,-1),po=(0,s._)("g",null,null,-1),go=(0,s._)("g",null,null,-1),vo=(0,s._)("g",null,null,-1),ho=(0,s._)("g",null,null,-1),wo=(0,s._)("g",null,null,-1),fo=(0,s._)("g",null,null,-1),_o=(0,s._)("g",null,null,-1),yo=(0,s._)("g",null,null,-1),bo=[so,ao,no,io,lo,co,uo,mo,po,go,vo,ho,wo,fo,_o,yo];function ko(e,t,o,r,a,n){return(0,s.wg)(),(0,s.iD)("svg",{version:"1.1",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 491 491",style:(0,ne.j5)({fill:o.active?"var(--primary)":"grey"}),"xml:space":"preserve"},bo,4)}var zo={props:["active"]};const Do=(0,p.Z)(zo,[["render",ko]]);var Co=Do,Po={props:["ranking"],components:{Beer:Co},data(){return{rankingBeerList:[]}},mounted(){for(let t=0;t<5;++t){var e;e=this.ranking>t?{index:t,active:!0}:{index:t,active:!1},this.rankingBeerList.push(e)}}};const Eo=(0,p.Z)(Po,[["render",ro],["__scopeId","data-v-797644aa"]]);var Io=Eo,$o={name:"Commento",props:["idUtente","commento"],data(){return{nomeUtente:""}},components:{Account:nt,Ranking:Io},async mounted(){try{const e=await fetch(`${ct.baseURL}/auth/utenti/${this.idUtente}`),t=await e.json();t.success?this.nomeUtente=t.nomeUtente:this.$emit("fetchError")}catch(e){console.log(e,this.recensione.utente),this.$emit("fetchError")}}};const Lo=(0,p.Z)($o,[["render",to]]);var xo=Lo;async function So(e){const t={method:"POST",headers:{Authorization:`Bearer ${Ue.state.token}`}};let o={status:!1,messaggio:""},r=null;try{const s=await fetch(`${ct.baseURL}/eventi/${e}/prenotazioni`,t);r=await s.json(),r.success||(o.status=!0,o.messaggio=r?.error||r?.message||"Errore inaspettato, riprovare")}catch(s){o.status=!0,o.messaggio=s||"Errore inaspettato, riprovare"}finally{return{data:r,error:o}}}async function Wo(e){const t={method:"DELETE",headers:{Authorization:`Bearer ${Ue.state.token}`}};let o={status:!1,messaggio:""},r=null;try{const s=await fetch(`${ct.baseURL}/eventi/${e}/prenotazioni`,t);r=await s.json(),r.success||(o.status=!0,o.messaggio=r?.error||r?.message||"Errore inaspettato, riprovare")}catch(s){this.error.status=!0,this.error.messaggio=s||"Errore inaspettato, riprovare"}finally{return{data:r,error:o}}}var Uo={name:"paginaEvento",props:["eventoID"],components:{Primary:qt,Secondary:At,Errors:Ee,Message:Jt,Commento:xo},data(){return{evento:null,eventoCaricato:!1,copertinaCaricata:!1,utentePrenotato:!1,immagine:null,preview:null,copertina:null,commento:{utente:null,commento:""},error:{status:!1,messaggio:"Messaggio di default."}}},methods:{fileSelezionato(e){this.immagine=e.target.files[0],this.preview=URL.createObjectURL(this.immagine)},annullaCaricamento(){this.preview=null,document.getElementById("1").value=""},async caricaImmagine(){if(!this.immagine)return this.error.status=!0,void(this.error.messaggio="Selezionare almeno 1 file");const e=new FormData;e.append("immagine",this.immagine);try{const t=await lt().post(`${ct.baseURL}/eventi/${this.eventoID}/copertina`,e);t.data.success?(this.preview=null,this.$router.go()):(this.error.status=!0,this.error.messaggio=t.data?.error||t.data?.message)}catch(t){console.log(t)}},async postCommento(){this.commento.utente=this.$store.state?.user.id,console.log(this.commento);const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify(this.commento)};try{const t=await fetch(`${ct.baseURL}/eventi/${this.eventoID}/commenti`,e),o=await t.json();o.success?this.$router.go():(this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore interno, riprovare.")}catch(t){this.error.status=!0,this.error.messaggio=t||"Errore imprevisto, riprovare."}},async postPrenotazione(){const{data:e,error:t}=await So(this.eventoID);this.error=t,e.success&&(this.utentePrenotato=!0)},async deletePrenotazione(){const{data:e,error:t}=await Wo(this.eventoID);this.error=t,e.success&&(this.utentePrenotato=!1)}},async mounted(){try{const o=await fetch(`${ct.baseURL}/eventi/${this.eventoID}`),r=await o.json();if(r.success&&(this.evento=r.evento,this.eventoCaricato=!0,this.evento.prenotazioni.forEach((e=>{e._id===this.$store.state?.user.id&&(this.utentePrenotato=!0)}))),this.evento.copertina){const o=await lt().get(`${ct.baseURL}/eventi/${this.eventoID}/copertina`);if(o.data.success){var e=new Uint8Array(o.data.imm.file.data.data),t=e.reduce(((e,t)=>e+String.fromCharCode(t)),"");this.copertina=`data:${o.data.imm.file.contentType};base64,${btoa(t)}`,this.copertinaCaricata=!0}}}catch(o){console.log(o),this.error.status=!0,this.error.messaggio=o||"Errore del server, riprovare."}}};const Mo=(0,p.Z)(Uo,[["render",Wt],["__scopeId","data-v-052b2836"]]);var jo=Mo;const qo=e=>((0,s.dD)("data-v-305d08f6"),e=e(),(0,s.Cn)(),e),No={class:"form-group"},Ro=qo((()=>(0,s._)("label",{for:"emailInput"},"Indirizzo Email",-1))),Vo=qo((()=>(0,s._)("br",null,null,-1))),Ao={class:"form-group"},Oo=qo((()=>(0,s._)("label",{for:"inputPassword"},"Password",-1))),To={class:"form-group myflex"},Zo={class:"form-check checkbox"},Bo=qo((()=>(0,s._)("div",null,[(0,s._)("label",{class:"form-check-label",for:"remainLoggedIn"}," Resta collegato ")],-1))),Ho={class:"myflex"},Jo=qo((()=>(0,s._)("div",{class:"py-1"},null,-1)));function Go(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Secondary"),u=(0,s.up)("router-link"),m=(0,s.up)("Primary");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",{onSubmit:t[3]||(t[3]=(0,r.iM)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,s._)("div",No,[Ro,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.utente.email=e),type:"email",class:"form-control",placeholder:"Inserisci email",required:""},null,512),[[r.nr,n.utente.email]])]),Vo,(0,s._)("div",Ao,[Oo,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.utente.password=e),type:"password",class:"form-control",placeholder:"Inserisci Password",required:""},null,512),[[r.nr,n.utente.password]])]),(0,s._)("div",To,[(0,s._)("div",Zo,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",id:"remainLoggedIn","onUpdate:modelValue":t[2]||(t[2]=e=>n.restaLoggato=e)},null,512),[[r.e8,n.restaLoggato]]),Bo])]),(0,s._)("div",Ho,[(0,s.Wm)(u,{to:{name:"passwordDimenticata"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"Dimenticato la password"})])),_:1}),(0,s.Wm)(u,{to:{name:"registrazione"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"Crea Nuovo Account"})])),_:1}),(0,s._)("div",null,[Jo,(0,s.Wm)(m,{title:"Login",type:"submit"})])])],32)])}var Yo={name:"LoginView",components:{Primary:qt,Secondary:At,Errors:Ee},data(){return{utente:{email:"",password:""},error:{status:!1,messaggio:"Messaggio di default."},restaLoggato:!1}},methods:{async login(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.utente)};try{const t=await fetch(`${ct.baseURL}/auth/login`,e),o=await t.json();if(o.success){const e=JSON.parse(atob(o.token.split(".")[1]));this.$store.commit("setLogin",{token:o.token,user:e,restaLoggato:this.restaLoggato}),this.$router.push("/")}else this.error.status=!0,this.error.messaggio=o?.error||o?.message||"Errore inaspettato"}catch(t){this.error.status=!0,this.error.messaggio=t||"Errore del server, riprovare."}}}};const Fo=(0,p.Z)(Yo,[["render",Go],["__scopeId","data-v-305d08f6"]]);var Ko=Fo;const Qo={class:"myflex"};function Xo(e,t,o,r,a,n){const i=(0,s.up)("Primary"),l=(0,s.up)("router-link"),c=(0,s.up)("Secondary");return(0,s.wg)(),(0,s.iD)("div",Qo,[(0,s.Wm)(l,{to:{name:"registrazioneCliente"}},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{title:"Registrati come Cliente"})])),_:1}),(0,s.Wm)(l,{to:{name:"registrazioneGestoreLocale"}},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{title:"Registrati come gestore di locale"})])),_:1}),(0,s.Wm)(l,{to:{name:"login"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"Torna indietro"})])),_:1})])}var er={name:"RegistrazionView",components:{Secondary:At,Primary:qt}};const tr=(0,p.Z)(er,[["render",Xo],["__scopeId","data-v-ed61a882"]]);var or=tr;const rr=e=>((0,s.dD)("data-v-fbc48ed0"),e=e(),(0,s.Cn)(),e),sr={class:"container pt-2"},ar={class:"form-group mb-1"},nr=rr((()=>(0,s._)("label",{for:"nome"},"Nome utente",-1))),ir={class:"form-group mb-1"},lr=rr((()=>(0,s._)("label",{for:"email"},"Email",-1))),cr={class:"form-group mb-1"},ur=rr((()=>(0,s._)("label",{for:"password1"},"Password",-1))),mr={class:"form-group mb-1"},dr=rr((()=>(0,s._)("label",{for:"password2"},"Conferma Password",-1))),pr={class:"myflex"},gr=rr((()=>(0,s._)("div",{class:"py-1"},null,-1)));function vr(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Primary"),u=(0,s.up)("Secondary"),m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",sr,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",{class:"container",onSubmit:t[4]||(t[4]=(0,r.iM)(((...e)=>i.registrazioneCliente&&i.registrazioneCliente(...e)),["prevent"]))},[(0,s._)("div",ar,[nr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.cliente.nome=e),type:"text",class:"form-control",id:"nome",placeholder:"Inserisci Nome Utente",required:""},null,512),[[r.nr,n.cliente.nome]])]),(0,s._)("div",ir,[lr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.cliente.email=e),type:"email",class:"form-control",id:"email",placeholder:"Enter email",required:""},null,512),[[r.nr,n.cliente.email]])]),(0,s._)("div",cr,[ur,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.cliente.password=e),type:"password",class:"form-control",id:"password1",placeholder:"Password"},null,512),[[r.nr,n.cliente.password]])]),(0,s._)("div",mr,[dr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.cliente.confermaPassword=e),type:"password",class:"form-control",id:"password2",placeholder:"Password"},null,512),[[r.nr,n.cliente.confermaPassword]])]),(0,s._)("div",pr,[(0,s._)("div",null,[gr,(0,s.Wm)(c,{type:"submit",title:"Registrati"})]),(0,s.Wm)(m,{to:{name:"registrazione"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Torna indietro"})])),_:1})])],32)])}var hr={name:"RegistrazionView",components:{Secondary:At,Primary:qt,Errors:Ee},data(){return{cliente:{nome:"",email:"",password:""},confermaPassword:"",error:{status:!1,messaggio:"Messaggio di errore"}}},methods:{async registrazioneCliente(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.cliente)};try{const t=await fetch(`${ct.baseURL}/auth/new/cliente`,e),o=await t.json();o.success?this.$router.push("/login"):(console.log(o.error||o.message),this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore inaspettato, riprovare")}catch(t){console.log(t),this.error.status=!0,this.error.messaggio=data.error||data.message||"Errore inaspettato, riprovare"}}}};const wr=(0,p.Z)(hr,[["render",vr],["__scopeId","data-v-fbc48ed0"]]);var fr=wr;const _r={class:"container pt-2"},yr={class:"form-group mb-1"},br=(0,s._)("label",{for:"nome"},"Nome Utente",-1),kr={class:"form-group mb-1"},zr=(0,s._)("label",{for:"email"},"Email",-1),Dr=(0,s._)("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your email with anyone else.",-1),Cr={class:"form-group mb-1"},Pr=(0,s._)("label",{for:"password1"},"Password",-1),Er={class:"form-group mb-1"},Ir=(0,s._)("label",{for:"password2"},"Conferma Password",-1),$r={class:"form-group mb-1"},Lr=(0,s._)("label",{for:"nomeLocale"},"Nome Locale",-1),xr={class:"form-group mb-1"},Sr=(0,s._)("label",{for:"posizione"},"Posizione",-1),Wr={class:"myflex"},Ur=(0,s._)("div",{class:"py-1"},null,-1);function Mr(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Primary"),u=(0,s.up)("Secondary"),m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",_r,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",{onSubmit:t[6]||(t[6]=(0,r.iM)(((...e)=>i.registrazioneGestoreLocale&&i.registrazioneGestoreLocale(...e)),["prevent"]))},[(0,s._)("div",yr,[br,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.gestoreLocale.nome=e),type:"text",class:"form-control",id:"nome",placeholder:"Nome Utente",required:""},null,512),[[r.nr,n.gestoreLocale.nome]])]),(0,s._)("div",kr,[zr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.gestoreLocale.email=e),type:"email",class:"form-control",id:"email",placeholder:"Email",required:""},null,512),[[r.nr,n.gestoreLocale.email]]),Dr]),(0,s._)("div",Cr,[Pr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.gestoreLocale.password=e),type:"password",class:"form-control",id:"password1",placeholder:"Password",required:""},null,512),[[r.nr,n.gestoreLocale.password]])]),(0,s._)("div",Er,[Ir,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.gestoreLocale.confermaPassword=e),type:"password",class:"form-control",id:"password2",placeholder:"Password",required:""},null,512),[[r.nr,n.gestoreLocale.confermaPassword]])]),(0,s._)("div",$r,[Lr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.gestoreLocale.nomeLocale=e),type:"text",class:"form-control",id:"nomeLocale",placeholder:"Nome Locale",required:""},null,512),[[r.nr,n.gestoreLocale.nomeLocale]])]),(0,s._)("div",xr,[Sr,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.gestoreLocale.posizione=e),type:"text",class:"form-control",id:"posizione",placeholder:"Positione",required:""},null,512),[[r.nr,n.gestoreLocale.posizione]])]),(0,s._)("div",Wr,[(0,s._)("div",null,[Ur,(0,s.Wm)(c,{type:"submit",title:"Registrati"})]),(0,s.Wm)(m,{to:{name:"registrazione"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Torna indietro"})])),_:1})])],32)])}var jr={name:"RegistrazionView",components:{Secondary:At,Primary:qt,Errors:Ee},data(){return{gestoreLocale:{nome:"",email:"",password:"",nomeLocale:"",posizione:""},confermaPassword:"",error:{status:"",messagggio:"Messaggio di Errore"}}},methods:{async registrazioneGestoreLocale(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.gestoreLocale)};try{const t=await fetch(`${ct.baseURL}/auth/new/gestorelocale`,e),o=await t.json();o.success?this.$router.push("/login"):(console.log(o.error||o.message),this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore inaspettato, riprovare")}catch(t){console.log(t),this.error.status=!0,this.error.messaggio=data.error||data.message||"Errore inaspettato, riprovare"}}}};const qr=(0,p.Z)(jr,[["render",Mr]]);var Nr=qr;const Rr=e=>((0,s.dD)("data-v-1489b129"),e=e(),(0,s.Cn)(),e),Vr={class:"container pt-2"},Ar={class:"form-group"},Or=Rr((()=>(0,s._)("label",{for:"exampleInputEmail1"},"Inserire Email",-1))),Tr=Rr((()=>(0,s._)("small",{id:"email",class:"form-text text-muted"},"Per recuperare la propria password inserire la propria mail o il proprio username e controllare la casella di posta.",-1))),Zr={class:"myflex"};function Br(e,t,o,a,n,i){const l=(0,s.up)("Message"),c=(0,s.up)("Errors"),u=(0,s.up)("Primary"),m=(0,s.up)("Secondary"),d=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("main",Vr,[(0,s.Wm)(l,{messaggio:n.messaggio,isSuccess:"true"},null,8,["messaggio"]),(0,s.Wm)(c,{error:n.error},null,8,["error"]),(0,s._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>i.mandaMail&&i.mandaMail(...e)),["prevent"]))},[(0,s._)("div",Ar,[Or,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"text",class:"form-control",id:"email",placeholder:"Email",required:""},null,512),[[r.nr,n.email]]),Tr]),(0,s._)("div",Zr,[(0,s._)("div",null,[(0,s.Wm)(u,{title:"Manda Mail di Recupero",type:"submit"})]),(0,s.Wm)(d,{to:{name:"login"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"Torna indietro",type:"submit"})])),_:1})])],32)])}var Hr={name:"passwordDimenticata",components:{Primary:qt,Secondary:At,Message:Jt,Errors:Ee},data(){return{email:"",messaggio:{messaggio:"Inserire email",status:!1},error:{messaggio:"Messaggio di errore",status:!1}}},methods:{async mandaMail(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})};try{const t=await fetch(`${ct.baseURL}/auth/passworddimenticata`,e),o=await t.json();o.success?(this.messaggio.messaggio="Email inviata correttamente",this.messaggio.status=!0):(this.error.messaggio=o.error||o.message||"Qualcosa Ã¨ andato storto",this.error.status=!0)}catch(t){this.error.messaggio=t||"Errore imprevisto con il server",this.error.status=!0}}}};const Jr=(0,p.Z)(Hr,[["render",Br],["__scopeId","data-v-1489b129"]]);var Gr=Jr;const Yr=e=>((0,s.dD)("data-v-6e0ea595"),e=e(),(0,s.Cn)(),e),Fr={class:"form-group"},Kr=Yr((()=>(0,s._)("label",{for:"inputPassword"},"Inserisci nuova password",-1))),Qr=Yr((()=>(0,s._)("br",null,null,-1))),Xr={class:"form-group pt-2"},es=Yr((()=>(0,s._)("label",{for:"inputPassword"},"Conferma nuova password",-1))),ts={class:"myflex"},os=Yr((()=>(0,s._)("div",{class:"py-1"},null,-1)));function rs(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Primary");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>i.resetPassword&&i.resetPassword(...e)),["prevent"]))},[(0,s._)("div",Fr,[Kr,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Inserisci Password","onUpdate:modelValue":t[0]||(t[0]=e=>n.password=e),required:""},null,512),[[r.nr,n.password]])]),Qr,(0,s._)("div",Xr,[es,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",placeholder:"Conferma Password","onUpdate:modelValue":t[1]||(t[1]=e=>n.confermaPassword=e),required:""},null,512),[[r.nr,n.confermaPassword]])]),(0,s._)("div",ts,[(0,s._)("div",null,[os,(0,s.Wm)(c,{title:"Conferma",type:"submit"})])])],32)])}var ss={name:"resetPassword",props:["passwordToken"],components:{Primary:qt,Secondary:At,Errors:Ee},data(){return{password:"",confermaPassword:"",error:{status:!1,messaggio:"Errore generico del server"}}},methods:{async resetPassword(){const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:this.password})};try{const t=await fetch(`${ct.baseURL}/auth/resetpassword/${this.passwordToken}`,e),o=await t.json();o.success?this.$router.push({name:"login"}):(this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore inaspettato, riprovare")}catch(t){console.log(t),this.error.status=!0,this.error.messaggio=t||"Errore inaspettato, riprovare"}}}};const as=(0,p.Z)(ss,[["render",rs],["__scopeId","data-v-6e0ea595"]]);var ns=as;const is=e=>((0,s.dD)("data-v-7b9b490a"),e=e(),(0,s.Cn)(),e),ls={key:0,class:"post"},cs={class:"title"},us={class:"head-title"},ms={class:"title-account"},ds={class:"bio"},ps={class:"bio-title"},gs=is((()=>(0,s._)("h4",null,"Descrizione Locale",-1))),vs={class:"beer-button"},hs={class:""},ws={key:0},fs={class:"comments"},_s=is((()=>(0,s._)("div",{class:"info-comments px-4 mt-3 mb-2"},[(0,s._)("h3",null,"Prossimi Eventi")],-1))),ys={key:0},bs={class:"comm-row"},ks={key:1},zs={class:"comments"},Ds=is((()=>(0,s._)("div",{class:"info-comments px-4 mt-3 mb-2"},[(0,s._)("h3",null,"Eventi Passati")],-1))),Cs={key:0},Ps={class:"comm-row"},Es={key:1},Is={class:"comments"},$s=is((()=>(0,s._)("h3",null,"Recensioni",-1))),Ls={key:0,class:"form-recensione"},xs={class:"input-group mb-3"},Ss={class:"input-group-append"},Ws=is((()=>(0,s._)("option",{value:"",disabled:"",selected:""},"Vota",-1))),Us=["value"],Ms={class:"comm-row"};function js(e,t,o,a,n,i){const l=(0,s.up)("Account"),c=(0,s.up)("Beer"),u=(0,s.up)("Primary"),m=(0,s.up)("router-link"),d=(0,s.up)("CardEvento"),p=(0,s.up)("Message"),g=(0,s.up)("Recensione");return n.locale?((0,s.wg)(),(0,s.iD)("div",ls,[(0,s._)("div",cs,[(0,s._)("div",us,[(0,s._)("div",ms,[(0,s.Wm)(l)]),(0,s._)("h3",null,(0,ne.zw)(n.locale.nome[0].toUpperCase()+n.locale.nome.slice(1,1e3)),1)]),(0,s._)("div",ds,[(0,s._)("div",ps,[gs,(0,s._)("button",vs,[(0,s.Uk)((0,ne.zw)(Math.round(10*n.locale.ranking)/10)+" / 5 ",1),(0,s._)("div",hs,[(0,s.Wm)(c,{active:!0})])])]),(0,s._)("div",null,[(0,s._)("h5",null,(0,ne.zw)(n.locale.descrizione),1)])])]),o.localeID===e.$store.state.user?.locale&&e.$store.state.token?((0,s.wg)(),(0,s.iD)("div",ws,[(0,s.Wm)(m,{to:{name:"formCreazioneEvento"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Crea Evento"})])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",fs,[_s,0!=n.prossimiEventi.length?((0,s.wg)(),(0,s.iD)("div",ys,[(0,s._)("div",bs,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.prossimiEventi,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e._id,evento:e,onError:i.handleError},null,8,["evento","onError"])))),128))])])):((0,s.wg)(),(0,s.iD)("div",ks,[(0,s.Wm)(p,{isSuccess:!1,messaggio:{status:!0,messaggio:"Nessun evento in programma."}},null,8,["messaggio"])]))]),(0,s._)("div",zs,[Ds,0!=n.eventiPassati.length?((0,s.wg)(),(0,s.iD)("div",Cs,[(0,s._)("div",Ps,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.eventiPassati,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e._id,evento:e,onError:i.handleError},null,8,["evento","onError"])))),128))])])):((0,s.wg)(),(0,s.iD)("div",Es,[(0,s.Wm)(p,{isSuccess:!1,messaggio:{status:!0,messaggio:"Nessun evento in programma."}},null,8,["messaggio"])]))]),(0,s._)("div",Is,[$s,e.$store.state.token?((0,s.wg)(),(0,s.iD)("div",Ls,[(0,s._)("div",xs,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Inserisci nuovo commento",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.recensione.commento=e)},null,512),[[r.nr,n.recensione.commento]]),(0,s._)("div",Ss,[(0,s.wy)((0,s._)("select",{class:"custom-select border-top border-bottom py-1 rounded text-center","onUpdate:modelValue":t[1]||(t[1]=e=>n.recensione.votazione=e),required:""},[Ws,((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(5,(e=>(0,s._)("option",{value:e,key:e},(0,ne.zw)(e),9,Us))),64))],512),[[r.bM,n.recensione.votazione]]),(0,s.Wm)(u,{title:"Commenta",onButtonClicked:i.postRecensione},null,8,["onButtonClicked"])])])])):(0,s.kq)("",!0),(0,s._)("div",Ms,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.locale.recensioni,(e=>((0,s.wg)(),(0,s.j4)(g,{key:e._id,recensione:e},null,8,["recensione"])))),128))])])])):(0,s.kq)("",!0)}const qs={key:0,class:"comment my-2"},Ns={class:"left"},Rs={class:"right py-2"},Vs={class:"title-event"},As={class:"pb-0 pt-0 px-2"},Os={key:0,class:"pb-0 pt-0 px-2"},Ts={class:"column"},Zs={class:"unfollow"};function Bs(e,t,o,r,a,n){const i=(0,s.up)("account"),l=(0,s.up)("Secondary"),c=(0,s.up)("router-link"),u=(0,s.up)("Primary");return a.caricato?((0,s.wg)(),(0,s.iD)("div",qs,[(0,s._)("div",Ns,[(0,s.Wm)(i)]),(0,s._)("div",Rs,[(0,s._)("div",Vs,[(0,s._)("h5",As,(0,ne.zw)(o.evento.nome[0].toUpperCase()+o.evento.nome.slice(1,1e3)),1),o.evento.dataInizio<(new Date).now?((0,s.wg)(),(0,s.iD)("h6",Os,"Data: "+(0,ne.zw)(o.evento.dataInizio),1)):(0,s.kq)("",!0)]),(0,s._)("div",Ts,[(0,s._)("div",Zs,[(0,s._)("div",null,[(0,s.Wm)(c,{to:{name:"paginaEvento",params:{eventoID:o.evento._id}}},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{title:"Visualizza"})])),_:1},8,["to"])]),(0,s._)("div",null,[e.$store.state.token&&!a.utentePrenotato?((0,s.wg)(),(0,s.j4)(u,{key:0,title:"Prenotati",onClick:n.postPrenotazione},null,8,["onClick"])):(0,s.kq)("",!0),e.$store.state.token&&a.utentePrenotato?((0,s.wg)(),(0,s.j4)(l,{key:1,title:"Disiscriviti",onClick:n.deletePrenotazione},null,8,["onClick"])):(0,s.kq)("",!0)])])])])])):(0,s.kq)("",!0)}var Hs={components:{Account:nt,Secondary:At,Primary:qt,Errors:Ee},props:["evento"],data(){return{caricato:!1,utentePrenotato:!1,error:{status:!1,messaggio:""}}},methods:{async postPrenotazione(){const{data:e,error:t}=await So(this.evento._id);this.$emit("error",t),e.success&&(this.utentePrenotato=!0)},async deletePrenotazione(){const{data:e,error:t}=await Wo(this.evento._id);this.$emit("error",t),e.success&&(this.utentePrenotato=!1)}},async mounted(){try{const e=await fetch(`${ct.baseURL}/eventi/${this.evento._id}`),t=await e.json();t.success&&t.evento.prenotazioni.forEach((e=>{e._id===this.$store.state?.user.id&&(this.utentePrenotato=!0)})),this.caricato=!0}catch(e){console.log(e)}}};const Js=(0,p.Z)(Hs,[["render",Bs],["__scopeId","data-v-f247ec4e"]]);var Gs=Js;const Ys={class:"comment my-2"},Fs={class:"left"},Ks={class:"right py-2"},Qs={class:"upper"},Xs={class:"pb-0"},ea=(0,s._)("hr",null,null,-1),ta={class:"commento"};function oa(e,t,o,r,a,n){const i=(0,s.up)("Account"),l=(0,s.up)("Ranking");return(0,s.wg)(),(0,s.iD)("div",Ys,[(0,s._)("div",Fs,[(0,s.Wm)(i,{height:"{val}",width:"{val}"})]),(0,s._)("div",Ks,[(0,s._)("div",Qs,[(0,s._)("h5",Xs,(0,ne.zw)(a.nomeUtente),1),(0,s.Wm)(l,{ranking:o.recensione.votazione},null,8,["ranking"])]),ea,(0,s._)("div",ta,[(0,s._)("h6",null,(0,ne.zw)(o.recensione.commento),1)])])])}var ra={name:"Commento",props:["recensione"],data(){return{nomeUtente:""}},components:{Account:nt,Ranking:Io},async mounted(){try{const e=await fetch(`${ct.baseURL}/auth/utenti/${this.recensione.utente}`),t=await e.json();t.success?this.nomeUtente=t.nomeUtente:this.$emit("fetchError")}catch(e){console.log(e,this.recensione.utente),this.$emit("fetchError")}}};const sa=(0,p.Z)(ra,[["render",oa]]);var aa=sa,na={name:"paginaLocale",props:["localeID"],components:{CardEvento:Gs,Ranking:Io,Account:nt,Message:Jt,Primary:qt,Recensione:aa,Errors:Ee,Beer:Co},data(){return{locale:null,prossimiEventi:null,eventiPassati:null,recensione:{commento:"",votazione:"",utente:"",locale:""},error:{status:!1,messaggio:"Messaggio di default."}}},methods:{async postRecensione(){if(!this.recensione.commento||!this.recensione.votazione)return this.error.status=!0,void(this.error.messaggio="Compilare tutti i campi.");this.recensione.locale=this.localeID,this.recensione.utente=this.$store.state.user.id;const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify(this.recensione)};try{const t=await fetch(`${ct.baseURL}/locali/${this.localeID}/recensioni`,e),o=await t.json();o.success?this.$router.go():(this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore del server, riprovare.")}catch(t){console.log(t),this.error.status=!0,this.error.messaggio=t||"Errore del server, riprovare."}},async handleError(e){this.$emit("error",e)}},async mounted(){const e=await fetch(`${ct.baseURL}/locali/${this.localeID}`),t=await e.json();t.success&&(this.locale=t.locale,this.prossimiEventi=t.prossimiEventi,this.eventiPassati=t.eventiPassati)}};const ia=(0,p.Z)(na,[["render",js],["__scopeId","data-v-7b9b490a"]]);var la=ia;const ca={class:"post"},ua={class:"title"},ma={class:"comments"},da=(0,s._)("div",{class:"info-comments px-4 mt-3 mb-2"},[(0,s._)("h3",null,"Eventi in programma")],-1),pa={key:0},ga={class:"comm-row"},va={key:1},ha={class:"comments"},wa=(0,s._)("div",{class:"info-comments px-4 mt-3 mb-2"},[(0,s._)("h3",null,"Notifiche")],-1),fa={key:0,class:"comm-row"},_a={key:1},ya={class:"final-button mt-3 mb-1"},ba=(0,s._)("div",{class:"info-comments px-4 mt-3 mb-2"},[(0,s._)("h3",null,"Sezione Personale")],-1),ka={class:"p-1"},za={class:"p-1 text-center"},Da={class:"p-1 text-center"};function Ca(e,t,o,r,a,n){const i=(0,s.up)("Errors"),l=(0,s.up)("CardEvento"),c=(0,s.up)("Message"),u=(0,s.up)("CardNotifica"),m=(0,s.up)("Primary"),d=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",ca,[(0,s._)("div",ua,[(0,s._)("div",null,[(0,s._)("h3",null,(0,ne.zw)(a.nomeUtente.slice(0,1).toUpperCase()+a.nomeUtente.slice(1,1e3)),1)])]),(0,s.Wm)(i,{error:a.error},null,8,["error"]),(0,s._)("div",ma,[da,0!=a.prenotazioni.length?((0,s.wg)(),(0,s.iD)("div",pa,[(0,s._)("div",ga,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.prenotazioni,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e._id,evento:e},null,8,["evento"])))),128))])])):((0,s.wg)(),(0,s.iD)("div",va,[(0,s.Wm)(c,{isSuccess:!1,messaggio:{status:!0,messaggio:"Nessun evento in programma."}},null,8,["messaggio"])]))]),(0,s._)("div",ha,[wa,0!==a.notifiche.length?((0,s.wg)(),(0,s.iD)("div",fa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.notifiche,(e=>((0,s.wg)(),(0,s.j4)(u,{key:e,testoCompleto:e},null,8,["testoCompleto"])))),128))])):((0,s.wg)(),(0,s.iD)("div",_a,[(0,s.Wm)(c,{isSuccess:!1,messaggio:{status:!0,messaggio:"Nessuna notifica."}},null,8,["messaggio"])]))]),(0,s._)("div",ya,[ba,(0,s._)("div",ka,[(0,s._)("div",za,[(0,s.Wm)(d,{to:{name:"fromCambiaPassword"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"Cambia password"})])),_:1})]),(0,s._)("div",Da,[(0,s.Wm)(m,{title:"Elimina Account"})])])])])}const Pa={class:"comment my-2"},Ea={class:"left"},Ia={class:"right py-2"},$a={class:"title-event"},La={class:"pb-0 pt-0 px-2"},xa={key:0,class:"pb-0 pt-0 px-2"},Sa={key:0,class:"column"},Wa={class:"unfollow"};function Ua(e,t,o,r,a,n){const i=(0,s.up)("account"),l=(0,s.up)("Secondary"),c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Pa,[(0,s._)("div",Ea,[(0,s.Wm)(i)]),(0,s._)("div",Ia,[(0,s._)("div",$a,[(0,s._)("h5",La,(0,ne.zw)(e.evento.nome[0].toUpperCase()+e.evento.nome.slice(1,1e3)),1),e.evento.dataInizio<(new Date).now?((0,s.wg)(),(0,s.iD)("h6",xa,"Data: "+(0,ne.zw)(e.evento.dataInizio),1)):(0,s.kq)("",!0)]),e.$store.state.token?((0,s.wg)(),(0,s.iD)("div",Sa,[(0,s._)("div",Wa,[(0,s._)("div",null,[(0,s.Wm)(c,{to:{name:"paginaEvento",params:{eventoID:e.evento._id}}},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{title:"Visualizza"})])),_:1},8,["to"])]),(0,s._)("div",null,[(0,s.Wm)(l,{title:"Disiscriviti"})])])])):(0,s.kq)("",!0)])])}var Ma={components:{Account:nt,Secondary:At},props:["locale"]};const ja=(0,p.Z)(Ma,[["render",Ua],["__scopeId","data-v-611b6468"]]);var qa=ja;const Na={class:"comment"},Ra={class:"left"},Va={class:"right py-2"},Aa={class:"title-event px-2"},Oa=(0,s._)("hr",null,null,-1),Ta=(0,s._)("hr",null,null,-1);function Za(e,t,o,r,a,n){const i=(0,s.up)("Account");return(0,s.wg)(),(0,s.iD)("div",Na,[(0,s._)("div",Ra,[(0,s.Wm)(i)]),(0,s._)("div",Va,[(0,s._)("div",Aa,[(0,s._)("h5",null,(0,ne.zw)(a.evento),1),Oa,(0,s._)("h5",null,[(0,s.Uk)(" tenuto da: "+(0,ne.zw)(a.locale)+", in data ",1),(0,s._)("h4",null,(0,ne.zw)(a.dataEvento),1)])]),Ta,(0,s._)("div",null,(0,ne.zw)(a.messaggio),1)])])}var Ba={components:{Account:nt},props:["testoCompleto"],data(){return{messaggio:"",evento:"",dataEvento:"",locale:"",months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"]}},mounted(){this.messaggio=this.testoCompleto.split("//")[0],this.evento=this.testoCompleto.split("//")[1],this.dataEvento=this.testoCompleto.split("//")[2],this.locale=this.testoCompleto.split("//")[3]}};const Ha=(0,p.Z)(Ba,[["render",Za]]);var Ja=Ha,Ga={components:{Primary:qt,CardLocale:qa,CardEvento:Gs,Message:Jt,CardNotifica:Ja,Errors:Ee},data(){return{user:this.$store.state.user,nomeUtente:"",notifiche:[],prenotazioni:[],formCambiaPassoword:!1,error:{status:!1,messaggio:"Messaggio di default."}}},async mounted(){try{const e=await fetch(`${ct.baseURL}/auth/utenti/${this.$store.state.user.id}`),t=await e.json();t.success?(this.notifiche=t.notifiche,this.prenotazioni=t.prenotazioni,this.nomeUtente=t.nomeUtente):(this.error.status=!0,this.error.messaggio=t.error||t.message||"Errore del server, riprovare.")}catch(e){this.error.status=!0,this.error.messaggio=e||"Errore del server 1, riprovare."}}};const Ya=(0,p.Z)(Ga,[["render",Ca]]);var Fa=Ya;const Ka=(0,s._)("h1",{class:"text-center"},"Crea un nuovo Evento",-1),Qa={class:"form-group"},Xa=(0,s._)("label",{for:"nomeEvento"},"Nome Evento",-1),en=(0,s._)("br",null,null,-1),tn={class:"form-group"},on=(0,s._)("label",{for:"descrizioneEvento"},"Descrizione",-1),rn=(0,s._)("br",null,null,-1),sn={class:"form-group"},an=(0,s._)("label",{for:"dataInizio"},"Data Inizio",-1),nn={class:"myflex"};function ln(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Primary"),u=(0,s.up)("Secondary"),m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",null,[Ka,(0,s._)("div",Qa,[Xa,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.evento.nome=e),type:"text",class:"form-control",placeholder:"Inserisci nome evento",required:""},null,512),[[r.nr,n.evento.nome]])]),en,(0,s._)("div",tn,[on,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.evento.descrizione=e),type:"text",class:"form-control",placeholder:"Inserisci breve descrizione",required:""},null,512),[[r.nr,n.evento.descrizione]])]),rn,(0,s._)("div",sn,[an,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.evento.dataInizio=e),type:"datetime-local",class:"form-control",placeholder:"Inserisci data inizio evento",required:""},null,512),[[r.nr,n.evento.dataInizio]])]),(0,s._)("div",nn,[(0,s.Wm)(c,{title:"Conferma",onButtonClicked:i.postEvento},null,8,["onButtonClicked"]),(0,s.Wm)(m,{to:{name:"paginaLocale",props:{localeID:o.localeID}}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Indietro"})])),_:1},8,["to"])])])])}var cn={components:{Errors:Ee,Primary:qt,Secondary:At},props:["localeID"],data(){return{evento:{nome:"",dataInizio:"",descrizione:""},error:{messaggio:null,status:!1}}},methods:{async postEvento(){const e=this.$store.token||localStorage.getItem("token"),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(this.evento)};try{const e=await fetch(`${ct.baseURL}/locali/${this.localeID}/eventi`,t),o=await e.json();o.success?this.$router.push({name:"paginaLocale"}):(this.error.status=!0,this.error.messaggio=o?.message||o?.error||"Errore nel fetch.")}catch(o){console.log(o),this.error.status=!0,this.error.messaggio=o||"Errore imprevisto."}}}};const un=(0,p.Z)(cn,[["render",ln]]);var mn=un;const dn={class:"form-group"},pn=(0,s._)("label",{for:"text"},"Inserisci testo della Notifica",-1),gn={class:"myflex"},vn=(0,s._)("div",{class:"py-1"},null,-1);function hn(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Message"),u=(0,s.up)("Secondary"),m=(0,s.up)("router-link"),d=(0,s.up)("Primary");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s.Wm)(c,{messaggio:n.messaggio},null,8,["messaggio"]),(0,s._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>i.inviaNotifica&&i.inviaNotifica(...e)),["prevent"]))},[(0,s._)("div",dn,[pn,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.testo=e),class:"form-control",placeholder:"Inserisci testo notifica",required:""},null,512),[[r.nr,n.testo]])]),(0,s._)("div",gn,[(0,s.Wm)(m,{to:{name:"paginaEvento",params:{eventoID:o.eventoID}}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Torna indietro."})])),_:1},8,["to"]),(0,s._)("div",null,[vn,(0,s.Wm)(d,{title:"Invia notifica",type:"submit"})])])],32)])}var wn={components:{Primary:qt,Secondary:At,Errors:Ee,Message:Jt},props:["localeID","eventoID"],data(){return{testo:"",error:{status:!1,messaggio:"Messggio di errore"},messaggio:{isSuccess:!1,messaggio:"Messaggio di conferma"}}},methods:{async inviaNotifica(){const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify({messaggio:this.testo})};try{const t=await fetch(`${ct.baseURL}/locali/${this.localeID}/eventi/${this.eventoID}/notifiche`,e),o=await t.json();o.success?(this.messaggio.status=!0,this.messaggio.messaggio=o.message||"Messaggio inviato correttamente."):(this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore interno, riprovare.")}catch(t){this.error.status=!0,this.error.messaggio=t||"Errore imprevisto, ripro."}}}};const fn=(0,p.Z)(wn,[["render",hn]]);var _n=fn;const yn=e=>((0,s.dD)("data-v-462beec5"),e=e(),(0,s.Cn)(),e),bn={class:"container pt-2"},kn={class:"form-group mb-1"},zn=yn((()=>(0,s._)("label",{for:"nome"},"Vecchia Password",-1))),Dn={class:"form-group mb-1"},Cn=yn((()=>(0,s._)("label",{for:"nome"},"Nuova Password",-1))),Pn={class:"form-group mb-1"},En=yn((()=>(0,s._)("label",{for:"nome"},"Conferma Nuova Password",-1))),In={class:"myflex"},$n=yn((()=>(0,s._)("div",{class:"py-1"},null,-1)));function Ln(e,t,o,a,n,i){const l=(0,s.up)("Errors"),c=(0,s.up)("Primary"),u=(0,s.up)("Secondary"),m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",bn,[(0,s.Wm)(l,{error:n.error},null,8,["error"]),(0,s._)("form",{class:"container",onSubmit:t[3]||(t[3]=(0,r.iM)(((...e)=>i.cambiaPassword&&i.cambiaPassword(...e)),["prevent"]))},[(0,s._)("div",kn,[zn,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.oldPassword=e),type:"password",class:"form-control",id:"vecchiaPassword",placeholder:"Inserisci Vecchia password",required:""},null,512),[[r.nr,n.form.oldPassword]])]),(0,s._)("div",Dn,[Cn,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.newPassword=e),type:"password",class:"form-control",id:"password1",placeholder:"Inserisci Nuova password",required:""},null,512),[[r.nr,n.form.newPassword]])]),(0,s._)("div",Pn,[En,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.confermaPassword=e),type:"password",class:"form-control",id:"password2",placeholder:"Conferma nuova password",required:""},null,512),[[r.nr,n.confermaPassword]])]),(0,s._)("div",In,[(0,s._)("div",null,[$n,(0,s.Wm)(c,{type:"submit",title:"Cambia password"})]),(0,s.Wm)(m,{to:{name:"profiloPersonale"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"Annulla"})])),_:1})])],32)])}var xn={name:"RegistrazionView",components:{Secondary:At,Primary:qt,Errors:Ee},data(){return{form:{oldPassword:"",newPassword:""},confermaPassword:"",error:{status:!1,messaggio:"Messaggio di default"}}},methods:{async cambiaPassword(){if(this.confermaPassword!==this.form.newPassword)return this.error.status=!0,void(this.error.messaggio="La nuove password devono coincidere.");const e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify(this.form)};try{const t=await fetch(`${ct.baseURL}/auth/cambiopassword`,e),o=await t.json();o.success?this.$router.push("/login"):(this.error.status=!0,this.error.messaggio=o.error||o.message||"Errore inaspettato, riprovare",console.log(o.error||o.message))}catch(t){console.log(t),this.error.status=!0,this.error.messaggio=t||"Problema inaspettato, riprovare."}}}};const Sn=(0,p.Z)(xn,[["render",Ln],["__scopeId","data-v-462beec5"]]);var Wn=Sn;const Un=(0,s._)("h1",{class:"text-center text-danger"},"Error 403 - Not Authorized",-1),Mn=(0,s._)("h1",null,"Torna alla Home",-1);function jn(e,t){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[Un,(0,s.Wm)(o,{to:{name:"home"},class:"text-center pt-4"},{default:(0,s.w5)((()=>[Mn])),_:1})])}const qn={},Nn=(0,p.Z)(qn,[["render",jn]]);var Rn=Nn;const Vn=(0,s._)("h1",{class:"text-center text-danger"},"Error 404 - Page Not Found",-1),An=(0,s._)("h1",null,"Torna alla HOME",-1);function On(e,t){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[Vn,(0,s.Wm)(o,{to:{name:"home"},class:"text-center pt-4"},{default:(0,s.w5)((()=>[An])),_:1})])}const Tn={},Zn=(0,p.Z)(Tn,[["render",On]]);var Bn=Zn;const Hn=[{path:"/",name:"home",component:vt},{path:"/login",name:"login",component:Ko},{path:"/registrazione",name:"registrazione",component:or},{path:"/registrazione/cliente",name:"registrazioneCliente",component:fr},{path:"/registrazione/gestorelocale",name:"registrazioneGestoreLocale",component:Nr},{path:"/passworddimenticata",name:"passwordDimenticata",component:Gr},{path:"/resetpassword/:passwordToken",name:"resetPassword",component:ns,props:!0},{path:"/eventi/:eventoID",name:"paginaEvento",component:jo,props:!0},{path:"/locali/:localeID",name:"paginaLocale",component:la,props:!0},{path:"/locali/:localeID/invianotifica/:eventoID",name:"formInviaNotifica",component:_n,props:!0},{path:"/locali/:localeID/creaevento",name:"formCreazioneEvento",props:!0,component:mn,beforeEnter:[Me,je]},{path:"/cambiapassword",name:"fromCambiaPassword",component:Wn,beforeEnter:[Me]},{path:"/account",name:"profiloPersonale",component:Fa,beforeEnter:[Me]},{path:"/403",name:"error403",component:Rn},{path:"/:pathMatch(.*)*",name:"pageNotFound",component:Bn}],Jn=(0,xe.p7)({history:(0,xe.PO)("/"),routes:Hn});var Gn=Jn;(0,r.ri)(Le).use(Ue).use(Gn).mount("#app")}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],a=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,a,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var u=l(o)}for(t&&t(r);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self["webpackChunkfront_vue"]=self["webpackChunkfront_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(7370)}));r=o.O(r)})();
//# sourceMappingURL=app.22d204da.js.map